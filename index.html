<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>C-Vyaz</title>

<!-- Preload PNGs -->
<link rel="preload" as="image" href="1upper.png">
<link rel="preload" as="image" href="2down.png">

<style>
  *,*::before,*::after { box-sizing: border-box; }

  html,body {
    margin:0; padding:0;
    height:100%; width:100%;
    background:white;
    overflow:hidden;
  }

  .center-logos {
    display:flex;
    align-items:center;
    justify-content:center;
    height:100%;
    width:100%;
  }

  .logos-inner {
    position:relative;
    width:1080px;
    height:1920px;
    transform-origin:center center;
    display:flex;
    align-items:center;
    justify-content:center;
    background:white;
  }

  .logo-img {
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    object-fit:contain;
    display:block;
    backface-visibility:hidden;
    transform:translateZ(0);
    will-change:opacity;
  }

  .gif { z-index:2; opacity:1; }
  .png {
    z-index:5;
    opacity:0;
    transition:opacity 0.1s linear;
    pointer-events:none; /* allow clicks to pass through */
  }

  .overlay-pngs {
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    display:flex;
    flex-direction:column;
  }

  .overlay-pngs img {
    width:100%;
    height:50%;
    object-fit:contain;
    display:block;
  }

  .click-zone {
    position:absolute;
    bottom:0; left:0;
    width:100%; height:50%;
    z-index:10; /* above everything else */
  }
</style>
</head>

<body>
<div class="center-logos">
  <div class="logos-inner" id="logos-inner">
    <!-- Combined GIF -->
    <img id="mainGif" class="logo-img gif" src="1upper2down.gif" alt="Combined animation">

    <!-- Overlay with two PNG halves -->
    <div id="pngOverlay" class="logo-img png">
      <div class="overlay-pngs">
        <img src="1upper.png" alt="Upper PNG">
        <img src="2down.png" alt="Lower PNG">
      </div>
    </div>

    <!-- Clickable lower half -->
    <a href="https://t.me/trust_musicvideo"
       target="_blank" rel="noopener"
       class="click-zone"></a>
  </div>
</div>

<script>
function scaleLogos() {
  const container = document.getElementById('logos-inner');
  const vh = (window.visualViewport ? window.visualViewport.height : window.innerHeight);
  const vw = window.innerWidth;
  const scale = Math.min((vw * 0.98) / 1080, (vh * 0.97) / 1920, 1);
  container.style.transform = `scale(${scale})`;
}

function preloadPNGs() {
  document.querySelectorAll('.overlay-pngs img').forEach(img => {
    if (!img.complete) {
      const tmp = new Image();
      tmp.src = img.src;
    }
  });
}

function crossfade() {
  const gif = document.getElementById('mainGif');
  const overlay = document.getElementById('pngOverlay');
  overlay.style.opacity = '1';
  setTimeout(() => {
    gif.style.opacity = '0';
    setTimeout(() => { gif.style.display = 'none'; }, 120);
  }, 100);
}

window.addEventListener('DOMContentLoaded', () => {
  preloadPNGs();
  scaleLogos();

  // Random fade start between 3.0â€“3.5 s
  const delay = 3000 + Math.random() * 500;
  setTimeout(crossfade, delay);

  window.addEventListener('resize', scaleLogos);
  if (window.visualViewport)
    window.visualViewport.addEventListener('resize', scaleLogos);
});
</script>
</body>
</html>
