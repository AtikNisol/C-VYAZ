<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>C-Vyaz</title>

<!-- Preload only PNGs -->
<link rel="preload" as="image" href="1upper.png">
<link rel="preload" as="image" href="2down.png">

<style>
  *, *::before, *::after { box-sizing: border-box; }

  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: white;
  }

  .center-logos {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    overflow: visible; /* prevent mobile clipping */
  }

  .center-logos-inner {
    width: 1080px;
    height: 1920px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    transform-origin: center center;
  }

  .logo-wrap {
    position: relative;
    width: 1080px;
    height: 960px;
    margin: 0;
    padding: 0;
  }

  .logo-img {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    backface-visibility: hidden;
    transform: translateZ(0);
    will-change: opacity;
  }

  .logo-img.gif { z-index: 2; opacity: 1; }
  .logo-img.png { z-index: 1; opacity: 0; }
  #upperPng { pointer-events: none; }

  a.logo-link { display: block; padding: 0; margin: 0; border: none; outline: none; }
</style>
</head>

<body>
<div class="center-logos">
  <div class="center-logos-inner" id="logos-inner">
    <!-- Upper logo -->
    <div class="logo-wrap">
      <img id="upperGif" class="logo-img gif" src="1upper.gif" width="1080" height="960" alt="Upper animation">
      <img id="upperPng" class="logo-img png" src="1upper.png" width="1080" height="960" alt="Upper logo">
    </div>

    <!-- Lower logo (clickable) -->
    <a class="logo-link" href="https://t.me/trust_musicvideo" target="_blank" rel="noopener">
      <div class="logo-wrap">
        <img id="lowerGif" class="logo-img gif" src="2down.gif" width="1080" height="960" alt="Lower animation">
        <img id="lowerPng" class="logo-img png" src="2down.png" width="1080" height="960" alt="Lower logo">
      </div>
    </a>
  </div>
</div>

<script>
function scaleLogos() {
  const container = document.getElementById('logos-inner');
  // Use visualViewport if available for mobile browsers
  const viewportHeight = window.visualViewport ? window.visualViewport.height : window.innerHeight;
  const viewportWidth = window.innerWidth;

  const scale = Math.min(
    (viewportWidth * 0.98)/1080,
    (viewportHeight * 0.98)/1920, // total stacked height
    1
  );
  container.style.transform = `scale(${scale})`;
  container.parentElement.style.display = 'flex';
  container.parentElement.style.alignItems = 'center';
  container.parentElement.style.justifyContent = 'center';
}

// Preload PNGs to prevent flash
function preloadPNGs() {
  const imgs = [document.getElementById('upperPng'), document.getElementById('lowerPng')];
  imgs.forEach(img=>{
    if(!img.complete) {
      const tmp = new Image();
      tmp.src = img.src;
    }
  });
}

// Fade PNGs in and hide GIFs
function crossfade() {
  const uGif = document.getElementById('upperGif');
  const lGif = document.getElementById('lowerGif');
  const uPng = document.getElementById('upperPng');
  const lPng = document.getElementById('lowerPng');

  uPng.style.transition = 'opacity 0.1s linear';
  lPng.style.transition = 'opacity 0.1s linear';
  uPng.style.opacity = '1';
  lPng.style.opacity = '1';

  setTimeout(()=>{
    uGif.style.opacity = '0';
    lGif.style.opacity = '0';
    setTimeout(()=>{
      uGif.style.display = 'none';
      lGif.style.display = 'none';
    },120);
  },100);
}

window.addEventListener('DOMContentLoaded', ()=>{
  scaleLogos();
  preloadPNGs();

  // Start crossfade timer immediately (2.9s)
  setTimeout(crossfade, 2900);

  // Also scale on resize
  window.addEventListener('resize', scaleLogos);
  if(window.visualViewport){
    window.visualViewport.addEventListener('resize', scaleLogos);
  }
});
</script>
</body>
</html>
